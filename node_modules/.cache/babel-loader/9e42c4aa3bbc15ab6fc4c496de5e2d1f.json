{"ast":null,"code":"import _classCallCheck from\"/Users/nirajshah/Library/Mobile Documents/com~apple~CloudDocs/Documents/A Northwestern/A Classes/22 Winter Quarter/CS 394/Spot/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/nirajshah/Library/Mobile Documents/com~apple~CloudDocs/Documents/A Northwestern/A Classes/22 Winter Quarter/CS 394/Spot/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/Users/nirajshah/Library/Mobile Documents/com~apple~CloudDocs/Documents/A Northwestern/A Classes/22 Winter Quarter/CS 394/Spot/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/Users/nirajshah/Library/Mobile Documents/com~apple~CloudDocs/Documents/A Northwestern/A Classes/22 Winter Quarter/CS 394/Spot/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React from\"react\";import ReactDOM from\"react-dom\";import{MapLayout}from\"./styles/mapstyles\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var mapStyles={map:{position:\"absolute\",width:\"100%\",height:\"100%\"}};export var CurrentLocation=/*#__PURE__*/function(_React$Component){_inherits(CurrentLocation,_React$Component);var _super=_createSuper(CurrentLocation);function CurrentLocation(props){var _this;_classCallCheck(this,CurrentLocation);_this=_super.call(this,props);var _this$props$initialCe=_this.props.initialCenter,lat=_this$props$initialCe.lat,lng=_this$props$initialCe.lng;_this.state={currentLocation:{lat:lat,lng:lng},zoomLevel:14};return _this;}_createClass(CurrentLocation,[{key:\"FavoritePosition\",value:function FavoritePosition(){var map=this.map;var google=this.props.google;var maps=google.maps;var pos={lat:41.879463,lng:-87.628461};var center=new maps.LatLng(pos.lat,pos.lng);map.panTo(center);//this.props.google.maps.setCenter(pos);\n}},{key:\"ChangeZoom\",value:function ChangeZoom(){this.setState({zoomLevel:13});this.loadMap();//this.props.google.maps.setCenter(pos);\n}},{key:\"componentDidUpdate\",value:function componentDidUpdate(prevProps,prevState){if(prevProps.google!==this.props.google){this.loadMap();}if(prevState.currentLocation!==this.state.currentLocation){this.recenterMap();}}},{key:\"recenterMap\",value:function recenterMap(){var map=this.map;var current=this.state.currentLocation;var google=this.props.google;var maps=google.maps;if(map){var center=new maps.LatLng(current.lat,current.lng);map.panTo(center);}}},{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;if(this.props.centerAroundCurrentLocation){if(navigator&&navigator.geolocation){navigator.geolocation.getCurrentPosition(function(pos){var coords=pos.coords;_this2.setState({currentLocation:{lat:coords.latitude,lng:coords.longitude}});});}}this.loadMap();}},{key:\"loadMap\",value:function loadMap(){if(this.props&&this.props.google){// checks if google is available\nvar google=this.props.google;var maps=google.maps;var mapRef=this.refs.map;// reference to the actual DOM element\nvar node=ReactDOM.findDOMNode(mapRef);var _this$state$currentLo=this.state.currentLocation,lat=_this$state$currentLo.lat,lng=_this$state$currentLo.lng;var center=new maps.LatLng(lat,lng);var mapConfig=Object.assign({},{center:center,zoom:this.state.zoomLevel});// maps.Map() is constructor that instantiates the map\nthis.map=new maps.Map(node,mapConfig);}}},{key:\"renderChildren\",value:function renderChildren(){var _this3=this;var children=this.props.children;if(!children)return;return React.Children.map(children,function(c){if(!c)return;return/*#__PURE__*/React.cloneElement(c,{map:_this3.map,google:_this3.props.google,mapCenter:_this3.state.currentLocation});});}},{key:\"render\",value:function render(){var _this4=this;var style=Object.assign({},mapStyles.map);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn\",onClick:function onClick(){return _this4.ChangeZoom();},children:window.innerWidth>600?\"Find more locations?\":\"More\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn\",onClick:function onClick(){return _this4.FavoritePosition();},children:window.innerWidth>600?\"Check home location\":\"Home\"}),/*#__PURE__*/_jsxs(MapLayout,{children:[/*#__PURE__*/_jsx(\"div\",{style:style,ref:\"map\",children:\"Loading map...\"}),this.renderChildren()]})]});}}]);return CurrentLocation;}(React.Component);CurrentLocation.defaultProps={zoom:14,initialCenter:{lat:41.91807726393084,lng:-87.65872153719155},centerAroundCurrentLocation:false,visible:true};export default CurrentLocation;","map":{"version":3,"sources":["/Users/nirajshah/Library/Mobile Documents/com~apple~CloudDocs/Documents/A Northwestern/A Classes/22 Winter Quarter/CS 394/Spot/src/Map.js"],"names":["React","ReactDOM","MapLayout","mapStyles","map","position","width","height","CurrentLocation","props","initialCenter","lat","lng","state","currentLocation","zoomLevel","google","maps","pos","center","LatLng","panTo","setState","loadMap","prevProps","prevState","recenterMap","current","centerAroundCurrentLocation","navigator","geolocation","getCurrentPosition","coords","latitude","longitude","mapRef","refs","node","findDOMNode","mapConfig","Object","assign","zoom","Map","children","Children","c","cloneElement","mapCenter","style","ChangeZoom","window","innerWidth","FavoritePosition","renderChildren","Component","defaultProps","visible"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport {\n  MapLayout\n} from \"./styles/mapstyles\";\n\nconst mapStyles = {\n  map: {\n    position: \"absolute\",\n    width: \"100%\",\n    height: \"100%\",\n  },\n};\n\nexport class CurrentLocation extends React.Component {\n  constructor(props) {\n    super(props);\n\n    const { lat, lng } = this.props.initialCenter;\n\n    this.state = {\n      currentLocation: {\n        lat: lat,\n        lng: lng,\n      },\n      zoomLevel: 14,\n    };\n  }\n\n  FavoritePosition() {\n    const map = this.map;\n    const google = this.props.google;\n    const maps = google.maps;\n\n    const pos = {\n      lat: 41.879463,\n      lng: -87.628461,\n    };\n\n    let center = new maps.LatLng(pos.lat, pos.lng);\n    map.panTo(center);\n\n    //this.props.google.maps.setCenter(pos);\n  }\n\n  ChangeZoom() {\n    this.setState({\n      zoomLevel: 13,\n    });\n\n    this.loadMap();\n\n    //this.props.google.maps.setCenter(pos);\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (prevProps.google !== this.props.google) {\n      this.loadMap();\n    }\n    if (prevState.currentLocation !== this.state.currentLocation) {\n      this.recenterMap();\n    }\n  }\n\n  recenterMap() {\n    const map = this.map;\n    const current = this.state.currentLocation;\n    const google = this.props.google;\n    const maps = google.maps;\n\n    if (map) {\n      let center = new maps.LatLng(current.lat, current.lng);\n      map.panTo(center);\n    }\n  }\n\n  componentDidMount() {\n    if (this.props.centerAroundCurrentLocation) {\n      if (navigator && navigator.geolocation) {\n        navigator.geolocation.getCurrentPosition((pos) => {\n          const coords = pos.coords;\n          this.setState({\n            currentLocation: {\n              lat: coords.latitude,\n              lng: coords.longitude,\n            },\n          });\n        });\n      }\n    }\n    this.loadMap();\n  }\n\n  loadMap() {\n    if (this.props && this.props.google) {\n      // checks if google is available\n      const { google } = this.props;\n      const maps = google.maps;\n\n      const mapRef = this.refs.map;\n\n      // reference to the actual DOM element\n      const node = ReactDOM.findDOMNode(mapRef);\n\n      const { lat, lng } = this.state.currentLocation;\n      const center = new maps.LatLng(lat, lng);\n\n      const mapConfig = Object.assign(\n        {},\n        {\n          center: center,\n          zoom: this.state.zoomLevel,\n        }\n      );\n\n      // maps.Map() is constructor that instantiates the map\n      this.map = new maps.Map(node, mapConfig);\n    }\n  }\n\n  renderChildren() {\n    const { children } = this.props;\n\n    if (!children) return;\n\n    return React.Children.map(children, (c) => {\n      if (!c) return;\n\n      return React.cloneElement(c, {\n        map: this.map,\n        google: this.props.google,\n        mapCenter: this.state.currentLocation,\n      });\n    });\n  }\n\n  render() {\n    const style = Object.assign({}, mapStyles.map);\n\n    return (\n      <>\n        <button type=\"button\" className=\"btn\" onClick={() => this.ChangeZoom()}>\n          {window.innerWidth > 600 ? \"Find more locations?\" : \"More\"}\n        </button>\n\n        <button\n          type=\"button\"\n          className=\"btn\"\n          onClick={() => this.FavoritePosition()}\n        >\n          {window.innerWidth > 600 ? \"Check home location\" : \"Home\"}\n        </button>\n\n        <MapLayout>\n          <div style={style} ref=\"map\">\n            Loading map...\n          </div>\n          {this.renderChildren()}\n        </MapLayout>\n      </>\n    );\n  }\n}\n\nCurrentLocation.defaultProps = {\n  zoom: 14,\n  initialCenter: {\n    lat: 41.91807726393084,\n    lng: -87.65872153719155,\n  },\n  centerAroundCurrentLocation: false,\n  visible: true,\n};\n\nexport default CurrentLocation;\n"]},"metadata":{},"sourceType":"module"}